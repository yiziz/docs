import{_ as s,c as t,a,b as e,t as p,d as o,o as c}from"./app.7364d4aa.js";const v='{"title":"Permissions","description":"","frontmatter":{"title":"Permissions"},"headers":[{"level":2,"title":"Access control","slug":"access-control"},{"level":2,"title":"rep:policy","slug":"rep-policy"}],"relativePath":"guide/backend/permissions/index.md"}',l={},r={id:"frontmatter-title",tabindex:"-1"},u=a("a",{class:"header-anchor",href:"#frontmatter-title","aria-hidden":"true"},"#",-1),i=o(`<p>Ensuring the <code>type=&quot;module&quot;</code> attribute is set for ClientLibs is import for AEM Vite to work. AEM Vite provide an authorizable user (<code>aem-vite-clientlibs</code>) that you will need to apply via a <code>rep:policy</code>.</p><h2 id="access-control" tabindex="-1">Access control <a class="header-anchor" href="#access-control" aria-hidden="true">#</a></h2><p>The first thing you will need to do is create a <code>.content.xml</code> file in your ClientLibs folder or the folder that you store your ClientLibs within. Add the following as its contents.</p><div class="language-xml"><pre><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">jcr:</span>root</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>jcr</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.jcp.org/jcr/1.0<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">xmlns:</span>nt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.jcp.org/jcr/nt/1.0<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">xmlns:</span>rep</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>internal<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">jcr:</span>mixinTypes</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>[rep:AccessControllable]<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">jcr:</span>primaryType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>nt:folder<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre></div><h2 id="rep-policy" tabindex="-1">rep:policy <a class="header-anchor" href="#rep-policy" aria-hidden="true">#</a></h2><p>The final step is to allow the AEM Vite <code>aem-vite-clientlibs</code> user access to any ClientLibs under AEM Vite control. Create a file called <code>_rep_policy.xml</code> in the same folder as where you stored your <code>.content.xml</code> file.</p><div class="language-xml"><pre><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">jcr:</span>root</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>jcr</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.jcp.org/jcr/1.0<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">xmlns:</span>rep</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>internal<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">jcr:</span>primaryType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>rep:ACL<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>allow</span>
        <span class="token attr-name"><span class="token namespace">jcr:</span>primaryType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>rep:GrantACE<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name"><span class="token namespace">rep:</span>principalName</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>aem-vite-clientlibs<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name"><span class="token namespace">rep:</span>privileges</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{Name}[jcr:all]<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">jcr:</span>root</span><span class="token punctuation">&gt;</span></span>
</code></pre></div>`,7);function k(n,d,m,q,h,g){return c(),t("div",null,[a("h1",r,[e(p(n.$frontmatter.title)+" ",1),u]),i])}var f=s(l,[["render",k]]);export{v as __pageData,f as default};
