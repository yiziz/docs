import{o as a,c as n,a as s,b as t,t as e,d as p}from"./app.ff91e19d.js";const o='{"title":"Installation","description":"","frontmatter":{"title":"Installation"},"headers":[{"level":2,"title":"Install methods","slug":"install-methods"},{"level":3,"title":"Using a release package","slug":"using-a-release-package"},{"level":3,"title":"Using a Maven dependency","slug":"using-a-maven-dependency"},{"level":3,"title":"Runmode considerations","slug":"runmode-considerations"},{"level":3,"title":"Dependencies","slug":"dependencies"},{"level":2,"title":"Configure ClientLibs","slug":"configure-clientlibs"},{"level":3,"title":"Update your template(s)","slug":"update-your-template-s"},{"level":3,"title":"Add esModule HTL binding","slug":"add-esmodule-htl-binding"},{"level":3,"title":"Add esModule ClientLib property","slug":"add-esmodule-clientlib-property"}],"relativePath":"guide/backend/installation/index.md","lastUpdated":1619918809016}',l={},c={id:"frontmatter-title"},i=s("a",{class:"header-anchor",href:"#frontmatter-title","aria-hidden":"true"},"#",-1),u=p('<p>Installation is straightforward and easy. Please ensure your read the below carefully as some manual steps are needed to finish the installation.</p><h2 id="install-methods"><a class="header-anchor" href="#install-methods" aria-hidden="true">#</a> Install methods</h2><p>There are currently two methods available to install AEM Vite.</p><h3 id="using-a-release-package"><a class="header-anchor" href="#using-a-release-package" aria-hidden="true">#</a> Using a release package</h3><p>The simple method to get AEM Vite installed is by downloading the latest release from GitHub. Download the <code>aem-vite.all.zip</code> file, upload it using the CRXDE package manager and install it.</p><p><a href="https://github.com/aem-vite/aem-vite/releases/latest" target="_blank" rel="noopener noreferrer">https://github.com/aem-vite/aem-vite/releases/latest</a></p><h3 id="using-a-maven-dependency"><a class="header-anchor" href="#using-a-maven-dependency" aria-hidden="true">#</a> Using a Maven dependency</h3><div class="tip custom-block"><p class="custom-block-title">Recommended</p><p>This method is recommended as it ensures everyone working on the project and all environments are using the same version of AEM Vite.</p></div><p>Add the <code>aem-vite.all</code> package as a Maven dependency in your apps <code>pom.xml</code> file.</p><div class="language-xml"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>dev.aemvite<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>aem-vite.all<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>0.0.1-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>\n</code></pre></div><p>Next, add the following to your <a href="https://jackrabbit.apache.org/filevault/overview.html" target="_blank" rel="noopener noreferrer">FileVault</a> configuration; remembering to change the <code>&lt;target&gt;</code> path to suit your project structure.</p><div class="language-xml"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>embedded</span><span class="token punctuation">&gt;</span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>dev.aemvite<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>aem-vite.all<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>type</span><span class="token punctuation">&gt;</span></span>zip<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>type</span><span class="token punctuation">&gt;</span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>target</span><span class="token punctuation">&gt;</span></span>/apps/${appId}-packages/application/install<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>target</span><span class="token punctuation">&gt;</span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>embedded</span><span class="token punctuation">&gt;</span></span>\n</code></pre></div><h3 id="runmode-considerations"><a class="header-anchor" href="#runmode-considerations" aria-hidden="true">#</a> Runmode considerations</h3><p>Consideration should be taken when using AEM Vite as an embedded package. It is recommended that you change the target to <code>install.local</code> and have your local development environments use the <code>local</code> runmode for example.</p><p>Running AEM Vite on non-local environments is possible and makes debugging possible through the use of tools such as ngrok, but is not recommended.</p><h3 id="dependencies"><a class="header-anchor" href="#dependencies" aria-hidden="true">#</a> Dependencies</h3><p>The current dependencies are:</p><ul><li>ACS Commons 4.6.0 or greater</li></ul><p>This may change in the near future to provide compatibility to projects that don&#39;t rely on the aforementioned dependencies.</p><h2 id="configure-clientlibs"><a class="header-anchor" href="#configure-clientlibs" aria-hidden="true">#</a> Configure ClientLibs</h2><p>As Vite natively builds ES modules by default it is important to have AEM generate <code>&lt;script module&gt;</code> tags for your ClientLibs.</p><h3 id="update-your-template-s"><a class="header-anchor" href="#update-your-template-s" aria-hidden="true">#</a> Update your template(s)</h3><p>The first change needed will be switch from the built-in <code>clientlib.html</code> HTL template to the AEM Vite template. Start by opening all of your page components/templates and change:</p><div class="language-html"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>sly</span>\n  <span class="token attr-name">data-sly-use.clientlib</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/libs/granite/sightly/templates/clientlib.html<span class="token punctuation">&quot;</span></span>\n<span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>sly</span><span class="token punctuation">&gt;</span></span>\n</code></pre></div><p>to</p><div class="language-html"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>sly</span>\n  <span class="token attr-name">data-sly-use.clientlib</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/apps/aem-vite/granite/sightly/templates/clientlib.html<span class="token punctuation">&quot;</span></span>\n<span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>sly</span><span class="token punctuation">&gt;</span></span>\n</code></pre></div><h3 id="add-esmodule-htl-binding"><a class="header-anchor" href="#add-esmodule-htl-binding" aria-hidden="true">#</a> Add <code>esModule</code> HTL binding</h3><p>Within the same file(s), locate all your <code>data-sly-call</code> instances for <code>clientlib.&lt;type&gt;</code> where <code>&lt;type&gt;</code> refers to <strong>all</strong> or <strong>js</strong>. Update all instances where you require ES module support. Adding the <code>esModule</code> binding won&#39;t automatically enable ES modules which you will need to enable in the next step.</p><div class="language-html"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>sly</span>\n  <span class="token attr-name">data-sly-test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${clientLibCategoriesJsHead}<span class="token punctuation">&quot;</span></span>\n  <span class="token attr-name">data-sly-call</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${clientlib.js @ categories=clientLibCategoriesJsHead, esModule=true}<span class="token punctuation">&quot;</span></span>\n<span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>sly</span><span class="token punctuation">&gt;</span></span>\n</code></pre></div><h3 id="add-esmodule-clientlib-property"><a class="header-anchor" href="#add-esmodule-clientlib-property" aria-hidden="true">#</a> Add <code>esModule</code> ClientLib property</h3><p>Next, open your ClientLibs folder/configuration and after <code>allowProxy</code> add the <code>esModule</code> property which instructs the custom ClientLibs handler in AEM Vite to generate <code>&lt;script&gt;</code> tags with the <code>module</code> attribute.</p><p>See the example below.</p><div class="language-xml"><pre><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">jcr:</span>root</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>cq</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.day.com/jcr/cq/1.0<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">xmlns:</span>jcr</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.jcp.org/jcr/1.0<span class="token punctuation">&quot;</span></span>\n  <span class="token attr-name"><span class="token namespace">jcr:</span>primaryType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cq:ClientLibraryFolder<span class="token punctuation">&quot;</span></span>\n  <span class="token attr-name">allowProxy</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{Boolean}true<span class="token punctuation">&quot;</span></span>\n  <span class="token attr-name">esModule</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{Boolean}true<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>\n</code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>Only add the <code>esModule</code> property to ClientLibs that will be consuming ES bundles generated by Vite. Adding it to non-ES modules won&#39;t break things in general but is not recommended.</p></div>',34);l.render=function(p,o,l,d,r,g){return a(),n("div",null,[s("h1",c,[i,t(" "+e(p.$frontmatter.title),1)]),u])};export default l;export{o as __pageData};
