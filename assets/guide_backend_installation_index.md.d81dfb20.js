import{_ as t,c as s,a,b as e,t as p,d as o,o as l}from"./app.5eb49d32.js";const v='{"title":"Installation","description":"","frontmatter":{"title":"Installation"},"headers":[{"level":2,"title":"Add the Maven dependency","slug":"add-the-maven-dependency"},{"level":3,"title":"Dependencies","slug":"dependencies"},{"level":2,"title":"Configure ClientLibs","slug":"configure-clientlibs"},{"level":3,"title":"Update your template(s)","slug":"update-your-template-s"},{"level":3,"title":"Add esModule HTL binding","slug":"add-esmodule-htl-binding"},{"level":3,"title":"Add esModule ClientLib property","slug":"add-esmodule-clientlib-property"}],"relativePath":"guide/backend/installation/index.md","lastUpdated":1644820827024}',c={},i={id:"frontmatter-title",tabindex:"-1"},u=a("a",{class:"header-anchor",href:"#frontmatter-title","aria-hidden":"true"},"#",-1),d=o(`<p>Installation is straightforward and easy. Please ensure your read the below carefully as some manual steps are needed to finish the installation.</p><h2 id="add-the-maven-dependency" tabindex="-1">Add the Maven dependency <a class="header-anchor" href="#add-the-maven-dependency" aria-hidden="true">#</a></h2><p>Add the <code>aem-vite.all</code> package as a Maven dependency in your apps <code>pom.xml</code> file.</p><div class="language-xml"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>dev.aemvite<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>aem-vite.all<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.2.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>Next, add the following to your <a href="https://jackrabbit.apache.org/filevault/overview.html" target="_blank" rel="noopener noreferrer">FileVault</a> configuration; remembering to change the <code>&lt;target&gt;</code> path to suit your project structure.</p><div class="language-xml"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>embedded</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>dev.aemvite<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>aem-vite.all<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>type</span><span class="token punctuation">&gt;</span></span>zip<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>type</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>target</span><span class="token punctuation">&gt;</span></span>/apps/\${appId}-packages/application/install<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>target</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>embedded</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="info custom-block"><p class="custom-block-title">INFO</p><p>This will typically be added to your <strong>all</strong> module or <strong>ui.apps</strong> if you don&#39;t have an <strong>all</strong> module.</p></div><h3 id="dependencies" tabindex="-1">Dependencies <a class="header-anchor" href="#dependencies" aria-hidden="true">#</a></h3><p>AEM Vite doesn&#39;t rely on any 3rd-party dependencies and only makes use of API&#39;s available in the AEM Uber JAR and Cloud SDK.</p><h2 id="configure-clientlibs" tabindex="-1">Configure ClientLibs <a class="header-anchor" href="#configure-clientlibs" aria-hidden="true">#</a></h2><p>As Vite natively builds ES modules by default, it is important to have AEM generate <code>&lt;script module&gt;</code> tags for your ClientLibs.</p><h3 id="update-your-template-s" tabindex="-1">Update your template(s) <a class="header-anchor" href="#update-your-template-s" aria-hidden="true">#</a></h3><p>The first change needed will be switch from the built-in <code>clientlib.html</code> HTL template to the AEM Vite template. Start by opening all of your page components/templates and change:</p><div class="language-html"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>sly</span>
  <span class="token attr-name">data-sly-use.clientlib</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/libs/granite/sightly/templates/clientlib.html<span class="token punctuation">&quot;</span></span>
<span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>sly</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>to</p><div class="language-html"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>sly</span>
  <span class="token attr-name">data-sly-use.clientlib</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/apps/aem-vite/granite/sightly/templates/clientlib.html<span class="token punctuation">&quot;</span></span>
<span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>sly</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="add-esmodule-htl-binding" tabindex="-1">Add <code>esModule</code> HTL binding <a class="header-anchor" href="#add-esmodule-htl-binding" aria-hidden="true">#</a></h3><p>Within the same file(s), locate all your <code>data-sly-call</code> instances for <code>clientlib.&lt;type&gt;</code> where <code>&lt;type&gt;</code> refers to <strong>all</strong> or <strong>js</strong>. Update all instances where you require ES module support. Adding the <code>esModule</code> binding won&#39;t automatically enable ES modules which you will need to enable in the next step.</p><div class="language-html"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>sly</span>
  <span class="token attr-name">data-sly-test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\${clientLibCategoriesJsHead}<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">data-sly-call</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\${clientlib.js @ categories=clientLibCategoriesJsHead, esModule=true}<span class="token punctuation">&quot;</span></span>
<span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>sly</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="add-esmodule-clientlib-property" tabindex="-1">Add <code>esModule</code> ClientLib property <a class="header-anchor" href="#add-esmodule-clientlib-property" aria-hidden="true">#</a></h3><p>Next, open your ClientLibs folder/configuration and after <code>allowProxy</code> add the <code>esModule</code> property which instructs the custom ClientLibs handler in AEM Vite to generate <code>&lt;script&gt;</code> tags with the <code>module</code> attribute.</p><p>See the example below.</p><div class="language-xml"><pre><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">jcr:</span>root</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>cq</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.day.com/jcr/cq/1.0<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">xmlns:</span>jcr</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.jcp.org/jcr/1.0<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name"><span class="token namespace">jcr:</span>primaryType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cq:ClientLibraryFolder<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">allowProxy</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{Boolean}true<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">esModule</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{Boolean}true<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre></div><div class="info custom-block"><p class="custom-block-title">Please Note</p><p>Only add the <code>esModule</code> property to ClientLibs that will be consuming ES bundles generated by Vite. Adding it to non-ES modules won&#39;t break things in general but is not recommended.</p></div>`,24);function r(n,g,k,h,m,y){return l(),s("div",null,[a("h1",i,[e(p(n.$frontmatter.title)+" ",1),u]),d])}var f=t(c,[["render",r]]);export{v as __pageData,f as default};
