import{o as a,c as n,a as s,b as t,t as e,d as p}from"./app.9e288e82.js";const o='{"title":"Permissions","description":"","frontmatter":{"title":"Permissions"},"headers":[{"level":2,"title":"Access control","slug":"access-control"},{"level":2,"title":"rep:policy","slug":"rep-policy"}],"relativePath":"guide/backend/permissions/index.md","lastUpdated":1629112638472}',c={},l={id:"frontmatter-title"},u=s("a",{class:"header-anchor",href:"#frontmatter-title","aria-hidden":"true"},"#",-1),r=p('<p>Prior to AEM Vite v2.1.0, the <code>type</code> attribute that defined the script as a module was not set due to AEM Vite not having permission to read the ClientLib properties. To ensure things have the correct behaviour, you are required to make your ClientLibs authorizable.</p><h2 id="access-control"><a class="header-anchor" href="#access-control" aria-hidden="true">#</a> Access control</h2><p>The first thing you will need to do is create a <code>.content.xml</code> file in your ClientLibs folder or the folder that you store your ClientLibs within. Add the following as its contents.</p><div class="language-xml"><pre><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">jcr:</span>root</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>jcr</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.jcp.org/jcr/1.0<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">xmlns:</span>nt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.jcp.org/jcr/nt/1.0<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">xmlns:</span>rep</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>internal<span class="token punctuation">&quot;</span></span>\n    <span class="token attr-name"><span class="token namespace">jcr:</span>mixinTypes</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>[rep:AccessControllable]<span class="token punctuation">&quot;</span></span>\n    <span class="token attr-name"><span class="token namespace">jcr:</span>primaryType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>nt:folder<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>\n</code></pre></div><h2 id="rep-policy"><a class="header-anchor" href="#rep-policy" aria-hidden="true">#</a> rep:policy</h2><p>The final step is to allow the AEM Vite <code>aem-vite-clientlibs</code> user access to any ClientLibs under AEM Vite control. Create a file called <code>_rep_policy.xml</code> in the same folder as where you stored your <code>.content.xml</code> file.</p><div class="language-xml"><pre><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">jcr:</span>root</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>jcr</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.jcp.org/jcr/1.0<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">xmlns:</span>rep</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>internal<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">jcr:</span>primaryType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>rep:ACL<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>allow</span>\n        <span class="token attr-name"><span class="token namespace">jcr:</span>primaryType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>rep:GrantACE<span class="token punctuation">&quot;</span></span>\n        <span class="token attr-name"><span class="token namespace">rep:</span>principalName</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>aem-vite-clientlibs<span class="token punctuation">&quot;</span></span>\n        <span class="token attr-name"><span class="token namespace">rep:</span>privileges</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{Name}[jcr:all]<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">jcr:</span>root</span><span class="token punctuation">&gt;</span></span>\n</code></pre></div>',7);c.render=function(p,o,c,i,k,d){return a(),n("div",null,[s("h1",l,[u,t(" "+e(p.$frontmatter.title),1)]),r])};export default c;export{o as __pageData};
