<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Vite Configuration</title>
    <meta name="description" content="AEM Vite brings the amazing Vite ecosystem to AEM in a transparent and friendly way.">
    <link rel="preload stylesheet" href="/assets/style.0b750bce.css" as="style">
    <link rel="modulepreload" href="/assets/chunks/VPAlgoliaSearchBox.4a1542cf.js">
    <link rel="modulepreload" href="/assets/app.54844076.js">
    <link rel="modulepreload" href="/assets/guide_front-end_vite_index.md.95de1db5.lean.js">
    
    <link rel="apple-touch-icon" sizes="180x180" href="/static/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/static/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/static/favicon-16x16.png">
  <link rel="manifest" href="/static/site.webmanifest">
  <link rel="mask-icon" href="/static/safari-pinned-tab.svg" color="#c34c5c">
  <link rel="shortcut icon" href="/static/favicon.ico">
  <meta name="apple-mobile-web-app-title" content="AEM Vite">
  <meta name="application-name" content="AEM Vite">
  <meta name="msapplication-TileColor" content="#c34c5c">
  <meta name="theme-color" content="#ffffff">
  <meta property="og:title" content="AEM Vite">
  <meta property="og:description" content="AEM Vite brings the amazing Vite ecosystem to AEM in a transparent and friendly way.">
  <meta property="og:image" content="/static/social/og-primary.jpg">
  <meta name="twitter:title" content="AEM Vite">
  <meta property="twitter:description" content="AEM Vite brings the amazing Vite ecosystem to AEM in a transparent and friendly way.">
  <meta property="twitter:site" content="@cshawaus">
  <script>(function(a,e,n,c,t,s){e[c]=e[c]||function(){(e[c].q=e[c].q||[]).push(arguments)},t=a.createElement("script"),s=a.getElementsByTagName("script")[0],t.async=1,t.src=n,t.id="fathom-script",s.parentNode.insertBefore(t,s)})(document,window,"//fathom.cshaw.tech/tracker.js","fathom"),fathom("set","siteId","BIUXJ"),fathom("trackPageview");</script>
  <script id="check-dark-light">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-6863a110><!--[--><!--]--><!--[--><span tabindex="-1" data-v-4e33c2da></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-4e33c2da> Skip to content </a><!--]--><!----><header class="VPNav" data-v-6863a110 data-v-fb477f38><div class="VPNavBar has-sidebar" data-v-fb477f38 data-v-8a0cfd82><div class="container" data-v-8a0cfd82><div class="title" data-v-8a0cfd82><div class="VPNavBarTitle has-sidebar" data-v-8a0cfd82 data-v-4bfab741><a class="title" href="/" data-v-4bfab741><!--[--><!--]--><!--[--><img class="VPImage logo" src="/static/logo.png" alt data-v-ecc6b19b><!--]--><!--[-->AEM Vite<!--]--><!--[--><!--]--></a></div></div><div class="content" data-v-8a0cfd82><div class="curtain" data-v-8a0cfd82></div><div class="content-body" data-v-8a0cfd82><!--[--><!--]--><div class="VPNavBarSearch search" data-v-8a0cfd82 style="--24757a60:&#39;Meta&#39;;"><div id="docsearch"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg class="DocSearch-Search-Icon" width="20" height="20" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-8a0cfd82 data-v-a77d470a><span id="main-nav-aria-label" class="visually-hidden" data-v-a77d470a>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/guide/backend/installation/" data-v-a77d470a data-v-d0cbdc1c data-v-747a89e1><!--[-->Installation<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/guide/front-end/" data-v-a77d470a data-v-d0cbdc1c data-v-747a89e1><!--[-->Front End<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/guide/legacy-bundles/" data-v-a77d470a data-v-d0cbdc1c data-v-747a89e1><!--[-->Legacy Bundles<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/guide/faqs/" data-v-a77d470a data-v-d0cbdc1c data-v-747a89e1><!--[-->FAQs<!--]--><!----></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-a77d470a data-v-1c6f77ff><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-1c6f77ff><span class="text" data-v-1c6f77ff><!----> Changelogs <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-1c6f77ff><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-1c6f77ff><div class="VPMenu" data-v-1c6f77ff data-v-9c1d2694><div class="items" data-v-9c1d2694><!--[--><!--[--><div class="VPMenuLink" data-v-9c1d2694 data-v-e62b8d8e><a class="VPLink link" href="https://github.com/aem-vite/aem-vite/blob/main/CHANGELOG.md" target="_blank" rel="noreferrer" data-v-e62b8d8e data-v-747a89e1><!--[-->Vite for AEM<!--]--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" height="24px" viewbox="0 0 24 24" width="24px" class="icon" data-v-747a89e1><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M9 5v2h6.59L4 18.59 5.41 20 17 8.41V15h2V5H9z"></path></svg></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-9c1d2694 data-v-e62b8d8e><a class="VPLink link" href="https://github.com/aem-vite/vite-aem-plugin/blob/main/CHANGELOG.md" target="_blank" rel="noreferrer" data-v-e62b8d8e data-v-747a89e1><!--[-->Vite AEM Plugin<!--]--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" height="24px" viewbox="0 0 24 24" width="24px" class="icon" data-v-747a89e1><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M9 5v2h6.59L4 18.59 5.41 20 17 8.41V15h2V5H9z"></path></svg></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-9c1d2694 data-v-e62b8d8e><a class="VPLink link" href="https://github.com/aem-vite/import-rewriter/blob/main/CHANGELOG.md" target="_blank" rel="noreferrer" data-v-e62b8d8e data-v-747a89e1><!--[-->Vite Import Rewriter<!--]--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" height="24px" viewbox="0 0 24 24" width="24px" class="icon" data-v-747a89e1><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M9 5v2h6.59L4 18.59 5.41 20 17 8.41V15h2V5H9z"></path></svg></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-8a0cfd82 data-v-9edb8d40><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" aria-checked="false" data-v-9edb8d40 data-v-61ad5abc data-v-2c5e4a14><span class="check" data-v-2c5e4a14><span class="icon" data-v-2c5e4a14><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-61ad5abc><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-61ad5abc><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-8a0cfd82 data-v-f104927c data-v-d2caa860><!--[--><a class="VPSocialLink" href="https://github.com/aem-vite" target="_blank" rel="noopener" data-v-d2caa860 data-v-7cbdacd9><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><a class="VPSocialLink" href="https://www.linkedin.com/groups/14049527/" target="_blank" rel="noopener" data-v-d2caa860 data-v-7cbdacd9><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>LinkedIn</title><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-8a0cfd82 data-v-fed5b71f data-v-1c6f77ff><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-1c6f77ff><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-1c6f77ff><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-1c6f77ff><div class="VPMenu" data-v-1c6f77ff data-v-9c1d2694><!----><!--[--><!--[--><!----><div class="group" data-v-fed5b71f><div class="item appearance" data-v-fed5b71f><p class="label" data-v-fed5b71f>Appearance</p><div class="appearance-action" data-v-fed5b71f><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" aria-checked="false" data-v-fed5b71f data-v-61ad5abc data-v-2c5e4a14><span class="check" data-v-2c5e4a14><span class="icon" data-v-2c5e4a14><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-61ad5abc><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-61ad5abc><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><div class="group" data-v-fed5b71f><div class="item social-links" data-v-fed5b71f><div class="VPSocialLinks social-links-list" data-v-fed5b71f data-v-d2caa860><!--[--><a class="VPSocialLink" href="https://github.com/aem-vite" target="_blank" rel="noopener" data-v-d2caa860 data-v-7cbdacd9><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><a class="VPSocialLink" href="https://www.linkedin.com/groups/14049527/" target="_blank" rel="noopener" data-v-d2caa860 data-v-7cbdacd9><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>LinkedIn</title><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-8a0cfd82 data-v-3f386e58><span class="container" data-v-3f386e58><span class="top" data-v-3f386e58></span><span class="middle" data-v-3f386e58></span><span class="bottom" data-v-3f386e58></span></span></button></div></div></div></div><!----></header><div class="VPLocalNav" data-v-6863a110 data-v-d7d179b2><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-d7d179b2><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="menu-icon" data-v-d7d179b2><path d="M17,11H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,11,17,11z"></path><path d="M21,7H3C2.4,7,2,6.6,2,6s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,7,21,7z"></path><path d="M21,15H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,15,21,15z"></path><path d="M17,19H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,19,17,19z"></path></svg><span class="menu-text" data-v-d7d179b2>Menu</span></button><a class="top-link" href="#" data-v-d7d179b2>Return to top</a></div><aside class="VPSidebar" data-v-6863a110 data-v-af7e5400><div class="curtain" data-v-af7e5400></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-af7e5400><span class="visually-hidden" id="sidebar-aria-label" data-v-af7e5400> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="group" data-v-af7e5400><section class="VPSidebarItem level-0" data-v-af7e5400 data-v-b71177d7><div class="item" role="button" data-v-b71177d7><div class="indicator" data-v-b71177d7></div><a class="VPLink link" data-v-b71177d7 data-v-747a89e1><!--[--><h2 class="text" data-v-b71177d7>Guide</h2><!--]--><!----></a><!----></div><div class="items" data-v-b71177d7><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b71177d7 data-v-b71177d7><div class="item" data-v-b71177d7><div class="indicator" data-v-b71177d7></div><a class="VPLink link link" href="/guide/" data-v-b71177d7 data-v-747a89e1><!--[--><p class="text" data-v-b71177d7>Overview</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-af7e5400><section class="VPSidebarItem level-0" data-v-af7e5400 data-v-b71177d7><div class="item" role="button" data-v-b71177d7><div class="indicator" data-v-b71177d7></div><a class="VPLink link" data-v-b71177d7 data-v-747a89e1><!--[--><h2 class="text" data-v-b71177d7>Getting Started</h2><!--]--><!----></a><!----></div><div class="items" data-v-b71177d7><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b71177d7 data-v-b71177d7><div class="item" data-v-b71177d7><div class="indicator" data-v-b71177d7></div><a class="VPLink link link" href="/guide/installation/" data-v-b71177d7 data-v-747a89e1><!--[--><p class="text" data-v-b71177d7>Installation</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-af7e5400><section class="VPSidebarItem level-0" data-v-af7e5400 data-v-b71177d7><div class="item" role="button" data-v-b71177d7><div class="indicator" data-v-b71177d7></div><a class="VPLink link" data-v-b71177d7 data-v-747a89e1><!--[--><h2 class="text" data-v-b71177d7>Backend (AEM)</h2><!--]--><!----></a><!----></div><div class="items" data-v-b71177d7><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b71177d7 data-v-b71177d7><div class="item" data-v-b71177d7><div class="indicator" data-v-b71177d7></div><a class="VPLink link link" href="/guide/backend/clientlibs/" data-v-b71177d7 data-v-747a89e1><!--[--><p class="text" data-v-b71177d7>ClientLibs</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b71177d7 data-v-b71177d7><div class="item" data-v-b71177d7><div class="indicator" data-v-b71177d7></div><a class="VPLink link link" href="/guide/backend/permissions/" data-v-b71177d7 data-v-747a89e1><!--[--><p class="text" data-v-b71177d7>Permissions</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-af7e5400><section class="VPSidebarItem level-0 has-active" data-v-af7e5400 data-v-b71177d7><div class="item" role="button" data-v-b71177d7><div class="indicator" data-v-b71177d7></div><a class="VPLink link" data-v-b71177d7 data-v-747a89e1><!--[--><h2 class="text" data-v-b71177d7>Front End</h2><!--]--><!----></a><!----></div><div class="items" data-v-b71177d7><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b71177d7 data-v-b71177d7><div class="item" data-v-b71177d7><div class="indicator" data-v-b71177d7></div><a class="VPLink link link" href="/guide/front-end/" data-v-b71177d7 data-v-747a89e1><!--[--><p class="text" data-v-b71177d7>Preparing your project</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b71177d7 data-v-b71177d7><div class="item" data-v-b71177d7><div class="indicator" data-v-b71177d7></div><a class="VPLink link link" href="/guide/front-end/structure/" data-v-b71177d7 data-v-747a89e1><!--[--><p class="text" data-v-b71177d7>Structure</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link is-active has-active" data-v-b71177d7 data-v-b71177d7><div class="item" data-v-b71177d7><div class="indicator" data-v-b71177d7></div><a class="VPLink link link" href="/guide/front-end/vite/" data-v-b71177d7 data-v-747a89e1><!--[--><p class="text" data-v-b71177d7>Vite configuration</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b71177d7 data-v-b71177d7><div class="item" data-v-b71177d7><div class="indicator" data-v-b71177d7></div><a class="VPLink link link" href="/guide/front-end/vite-plugin/" data-v-b71177d7 data-v-747a89e1><!--[--><p class="text" data-v-b71177d7>Vite plugin</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b71177d7 data-v-b71177d7><div class="item" data-v-b71177d7><div class="indicator" data-v-b71177d7></div><a class="VPLink link link" href="/guide/front-end/module-imports/" data-v-b71177d7 data-v-747a89e1><!--[--><p class="text" data-v-b71177d7>Module imports</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b71177d7 data-v-b71177d7><div class="item" data-v-b71177d7><div class="indicator" data-v-b71177d7></div><a class="VPLink link link" href="/guide/front-end/dynamic-imports/" data-v-b71177d7 data-v-747a89e1><!--[--><p class="text" data-v-b71177d7>Dynamic imports</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b71177d7 data-v-b71177d7><div class="item" data-v-b71177d7><div class="indicator" data-v-b71177d7></div><a class="VPLink link link" href="/guide/front-end/static-assets/" data-v-b71177d7 data-v-747a89e1><!--[--><p class="text" data-v-b71177d7>Static assets</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-af7e5400><section class="VPSidebarItem level-0" data-v-af7e5400 data-v-b71177d7><div class="item" role="button" data-v-b71177d7><div class="indicator" data-v-b71177d7></div><a class="VPLink link" data-v-b71177d7 data-v-747a89e1><!--[--><h2 class="text" data-v-b71177d7>Legacy Bundles</h2><!--]--><!----></a><!----></div><div class="items" data-v-b71177d7><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b71177d7 data-v-b71177d7><div class="item" data-v-b71177d7><div class="indicator" data-v-b71177d7></div><a class="VPLink link link" href="/guide/legacy-bundles/" data-v-b71177d7 data-v-747a89e1><!--[--><p class="text" data-v-b71177d7>What are they?</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b71177d7 data-v-b71177d7><div class="item" data-v-b71177d7><div class="indicator" data-v-b71177d7></div><a class="VPLink link link" href="/guide/legacy-bundles/clientlibs/" data-v-b71177d7 data-v-747a89e1><!--[--><p class="text" data-v-b71177d7>ClientLibs support</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-af7e5400><section class="VPSidebarItem level-0" data-v-af7e5400 data-v-b71177d7><div class="item" role="button" data-v-b71177d7><div class="indicator" data-v-b71177d7></div><a class="VPLink link" data-v-b71177d7 data-v-747a89e1><!--[--><h2 class="text" data-v-b71177d7>Support</h2><!--]--><!----></a><!----></div><div class="items" data-v-b71177d7><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b71177d7 data-v-b71177d7><div class="item" data-v-b71177d7><div class="indicator" data-v-b71177d7></div><a class="VPLink link link" href="/guide/faqs/" data-v-b71177d7 data-v-747a89e1><!--[--><p class="text" data-v-b71177d7>FAQs</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b71177d7 data-v-b71177d7><div class="item" data-v-b71177d7><div class="indicator" data-v-b71177d7></div><a class="VPLink link link" href="/guide/migrate-to-v2/" data-v-b71177d7 data-v-747a89e1><!--[--><p class="text" data-v-b71177d7>Migrate to v2.x</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-6863a110 data-v-317fca3b><div class="VPDoc has-sidebar has-aside" data-v-317fca3b data-v-f1707698><div class="container" data-v-f1707698><div class="aside" data-v-f1707698><div class="aside-curtain" data-v-f1707698></div><div class="aside-container" data-v-f1707698><div class="aside-content" data-v-f1707698><div class="VPDocAside" data-v-f1707698 data-v-2105bbcb><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" data-v-2105bbcb data-v-eb39c670><div class="content" data-v-eb39c670><div class="outline-marker" data-v-eb39c670></div><div class="outline-title" data-v-eb39c670>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-eb39c670><span class="visually-hidden" id="doc-outline-aria-label" data-v-eb39c670> Table of Contents for current page </span><ul class="root" data-v-eb39c670 data-v-2f6ec3b6><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-2105bbcb></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-f1707698><div class="content-container" data-v-f1707698><!--[--><!--]--><main class="main" data-v-f1707698><div style="position:relative;" class="vp-doc _guide_front-end_vite_index" data-v-f1707698><div><h1 id="frontmatter-title" tabindex="-1">Vite Configuration <a class="header-anchor" href="#frontmatter-title" aria-hidden="true">#</a></h1><p>Each and every project will be unique regarding structure, expected outputs and general development needs. The following is intended to provide coverage for general expectations using Adobe&#39;s AEM Archetype as a reference.</p><h2 id="recommended-configuration" tabindex="-1">Recommended configuration <a class="header-anchor" href="#recommended-configuration" aria-hidden="true">#</a></h2><p>Below is an example <code>vite.config.js</code> which intentionally uses the <code>vite-tsconfig-paths</code> as Adobe have adopted TypeScript in their archetype.</p><p>What you can see is the same output structures being used align to the <a href="/guide/front-end/structure/">structure</a> described previously. Some other things that are also going on:</p><ul><li>Sets the <code>base</code> path correctly for both <code>command</code> types</li><li>Sets the <code>publicDir</code> path to <code>src/assets</code>. Change this to match your source structure</li><li>Disables brotli compression calculations (saves 2-5 seconds per prod build)</li><li>Disables the <code>manifest.json</code> file</li><li>Disables minification when running in <strong>development</strong> mode</li><li>Disables sourcemaps when not using the Vite DevServer</li><li>Prefer <code>terser</code> over <code>esbuild</code> for minification</li><li>Enfore the server origin for static assets via <code>server.origin</code></li></ul><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">defineConfig</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">vite</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> tsconfigPaths </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">vite-tsconfig-paths</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">defineConfig</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">({</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">command</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">mode</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">})</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> (</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">base</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> command </span><span style="color:#89DDFF;">===</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">build</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">?</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/etc.clientlibs/&lt;project&gt;/clientlibs/</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">publicDir</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> command </span><span style="color:#89DDFF;">===</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">build</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">?</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">false</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">src/assets</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">build</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">brotliSize</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">false</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">manifest</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">false</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">minify</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> mode </span><span style="color:#89DDFF;">===</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">development</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">?</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">false</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">terser</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">outDir</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">dist</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">sourcemap</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> command </span><span style="color:#89DDFF;">===</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">serve</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">?</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">inline</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">false</span><span style="color:#89DDFF;">,</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">rollupOptions</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">output</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">assetFileNames</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">clientlib-site/resources/[ext]/[name][extname]</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">chunkFileNames</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">clientlib-site/resources/chunks/[name].[hash].js</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">entryFileNames</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">clientlib-site/resources/js/[name].js</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">plugins</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span><span style="color:#82AAFF;">tsconfigPaths</span><span style="color:#A6ACCD;">()]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">server</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">origin</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">http://localhost:3000</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">))</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>See <a href="./../module-imports/">module imports</a> which explains the reasoning behind the rollup <code>output</code> structure.</p><h3 id="base-path" tabindex="-1">Base path <a class="header-anchor" href="#base-path" aria-hidden="true">#</a></h3><p>A <code>base</code> path is required to support static assets and dynamic imports as it will ensure that certain files are loaded from the correct AEM path.</p><h3 id="specific-build-modes" tabindex="-1">Specific build modes <a class="header-anchor" href="#specific-build-modes" aria-hidden="true">#</a></h3><p>By default Vite runs its DevServer in <strong>development</strong> mode, but standard builds always run in <strong>production</strong> which is fine for non-AEM projects whereas AEM needs more control. The above configuration enables us to do things like the below.</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">vite</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">build</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--mode</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">development</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># or</span></span>
<span class="line"><span style="color:#FFCB6B;">vite</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">build</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--mode</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">production</span></span>
<span class="line"></span></code></pre></div><p>Now that you can build both development and production bundles, you can toggle between having features such as sourcemaps and console logging if you wish to test code outside of Vite&#39;s DevServer.</p><h2 id="source-structure" tabindex="-1">Source structure <a class="header-anchor" href="#source-structure" aria-hidden="true">#</a></h2><p>Where your inputs come from isn&#39;t important as Vite simply consumes anything you provide to it. It is, however, recommended that you consider your main website CSS and JavaScript separate entries.</p><p>The below example demonsrates this but you will need to keep in mind that the <code>input</code> keys should be unqiue otherwise rollup will automatically append an number to the end of the filename. See rollup&#39;s <a href="https://rollupjs.org/guide/en/#input" target="_blank" rel="noreferrer">input documentation</a> for more information.</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">defineConfig</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> (</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">build</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">rollupOptions</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">input</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">bundle</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">src/main/webpack/js/app.ts</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">styles</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">src/main/webpack/css/app.scss</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">))</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><h3 id="making-css-its-own-entry" tabindex="-1">Making CSS its own entry <a class="header-anchor" href="#making-css-its-own-entry" aria-hidden="true">#</a></h3><p>Due to how AEM handles CSS it is not recommended to import it directly in your JavaScript modules as this can result in undesired outputs. For consistency, you main CSS outputs should be declared explicitly in your Vite <code>rollupOptions.input</code> object. All other CSS specific to things such as React can be imported directly via JavaScript.</p><h2 id="plugins" tabindex="-1">Plugins <a class="header-anchor" href="#plugins" aria-hidden="true">#</a></h2><p>Please refer to Vite&#39;s <a href="https://vitejs.dev/guide/using-plugins.html" target="_blank" rel="noreferrer">plugin documentation</a> for instructions on using plugins in Vite.</p><h2 id="code-output" tabindex="-1">Code output <a class="header-anchor" href="#code-output" aria-hidden="true">#</a></h2><p>The process of how your bundled code gets handled shouldn&#39;t change if you won&#39;t need it to. The design of AEM Vite enables you to use any structure you wish but recommends ours for the best compatibility. Tools such as Adobe&#39;s <code>aem-clientlib-generator</code> will work perfectly fine with AEM Vite as it is executed after a build.</p><h2 id="devserver" tabindex="-1">DevServer <a class="header-anchor" href="#devserver" aria-hidden="true">#</a></h2><p>If you want to customise how the Vite DevServer behaves you can do so via Vite&#39;s <code>server</code> configuration. By default Vite will attempt to start the server on port <code>3000</code> but will automatically increment to the next available port if <code>3000</code> is already in use. To ensure this doesn&#39;t happen, it is recommended to set a more specific port that you don&#39;t expect to change.</p><p>Please refer to Vite&#39;s <a href="https://vitejs.dev/config/#server-options" target="_blank" rel="noreferrer">server api documention</a> for more information.</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">defineConfig</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> (</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">server</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">port</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">5000</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">))</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><h2 id="static-assets" tabindex="-1">Static assets <a class="header-anchor" href="#static-assets" aria-hidden="true">#</a></h2><p>Vite supports static assets without any configuration which works for external projects, but not AEM. To ensure static assets are served correctly in AEM you can use a configuration like the below.</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">defineConfig</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">({</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">command</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">})</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> (</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">base</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> command </span><span style="color:#89DDFF;">===</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">build</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">?</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/etc.clientlibs/&lt;project&gt;/clientlibs/</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">build</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">assetsDir</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">clientlib-site/resources/static</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">rollupOtions</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">assetFileNames</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">chunk</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">chunk</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">name</span><span style="color:#89DDFF;">?.</span><span style="color:#82AAFF;">endsWith</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">.css</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">          </span><span style="color:#89DDFF;">?</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">clientlib-site/resources/css/[name][extname]</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#F07178;">          </span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">clientlib-site/resources/static/[name].[hash][extname]</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">))</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>What this does is:</p><ol><li>Sets the base url for assets to <code>clientlib-site/resources/static</code> when running <code>build</code>, not <code>serve</code></li><li>Allow CSS and other assets to be separated which avoids everything been dumped into the <code>base</code> folder</li></ol></div></div></main><!--[--><!--]--><footer class="VPDocFooter" data-v-f1707698 data-v-43c9b6cf><div class="edit-info" data-v-43c9b6cf><div class="edit-link" data-v-43c9b6cf><a class="VPLink link edit-link-button" href="https://github.com/aem-vite/docs/edit/main/docs/guide/front-end/vite/index.md" target="_blank" rel="noreferrer" data-v-43c9b6cf data-v-747a89e1><!--[--><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="edit-link-icon" data-v-43c9b6cf><path d="M18,23H4c-1.7,0-3-1.3-3-3V6c0-1.7,1.3-3,3-3h7c0.6,0,1,0.4,1,1s-0.4,1-1,1H4C3.4,5,3,5.4,3,6v14c0,0.6,0.4,1,1,1h14c0.6,0,1-0.4,1-1v-7c0-0.6,0.4-1,1-1s1,0.4,1,1v7C21,21.7,19.7,23,18,23z"></path><path d="M8,17c-0.3,0-0.5-0.1-0.7-0.3C7,16.5,6.9,16.1,7,15.8l1-4c0-0.2,0.1-0.3,0.3-0.5l9.5-9.5c1.2-1.2,3.2-1.2,4.4,0c1.2,1.2,1.2,3.2,0,4.4l-9.5,9.5c-0.1,0.1-0.3,0.2-0.5,0.3l-4,1C8.2,17,8.1,17,8,17zM9.9,12.5l-0.5,2.1l2.1-0.5l9.3-9.3c0.4-0.4,0.4-1.1,0-1.6c-0.4-0.4-1.2-0.4-1.6,0l0,0L9.9,12.5z M18.5,2.5L18.5,2.5L18.5,2.5z"></path></svg> Edit this page<!--]--><!----></a></div><div class="last-updated" data-v-43c9b6cf><p class="VPLastUpdated" data-v-43c9b6cf data-v-9d6461ba>Last updated: <time datetime="2023-02-01T00:45:07.000Z" data-v-9d6461ba></time></p></div></div><div class="prev-next" data-v-43c9b6cf><div class="pager" data-v-43c9b6cf><a class="pager-link prev" href="/guide/front-end/structure/" data-v-43c9b6cf><span class="desc" data-v-43c9b6cf>Previous page</span><span class="title" data-v-43c9b6cf>Structure</span></a></div><div class="has-prev pager" data-v-43c9b6cf><a class="pager-link next" href="/guide/front-end/vite-plugin/" data-v-43c9b6cf><span class="desc" data-v-43c9b6cf>Next page</span><span class="title" data-v-43c9b6cf>Vite plugin</span></a></div></div></footer><!--[--><!--]--></div></div></div></div></div><footer class="VPFooter has-sidebar" data-v-6863a110 data-v-e94a7428><div class="container" data-v-e94a7428><p class="message" data-v-e94a7428>Apache 2.0 Licensed. Vite wording and logos are property of Evan You. Adobe and AEM wording and logos are property of Adobe Inc.</p><p class="copyright" data-v-e94a7428>Copyright  2021-2023 Chris Shaw</p></div></footer><!--[--><!--]--></div></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"guide_faqs_index.md\":\"fad7c324\",\"guide_backend_permissions_index.md\":\"ed288f4a\",\"guide_extending_clientlibs_index.md\":\"9b3ccf83\",\"guide_extending_why_index.md\":\"5c29f20f\",\"guide_backend_installation_index.md\":\"3ada0ee3\",\"guide_front-end_vite_index.md\":\"95de1db5\",\"guide_backend_clientlibs_index.md\":\"76bc5a0a\",\"guide_front-end_index.md\":\"2fbc758e\",\"guide_backend_configuration_index.md\":\"c040af80\",\"guide_index.md\":\"f993192a\",\"guide_installation_index.md\":\"1a98dfe7\",\"guide_legacy-bundles_clientlibs_index.md\":\"f0fe4ace\",\"guide_legacy-bundles_index.md\":\"9bb76901\",\"index.md\":\"5e23dbfd\",\"guide_migrate-to-v2_index.md\":\"4ccba67d\",\"guide_front-end_vite-plugin_index.md\":\"4d5a59cd\",\"guide_front-end_module-imports_index.md\":\"510da900\",\"guide_front-end_static-assets_index.md\":\"c75ed481\",\"guide_front-end_dynamic-imports_index.md\":\"6b3fe7ea\",\"guide_front-end_structure_index.md\":\"d9a552e0\"}")</script>
    <script type="module" async src="/assets/app.54844076.js"></script>
    
  </body>
</html>