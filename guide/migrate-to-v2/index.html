<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Migrate to v2.x | AEM Vite</title>
    <meta name="description" content="AEM Vite is a plugin for AEM that enables transparent support for the Vite DevServer.">
    <link rel="stylesheet" href="/assets/style.1acf75d1.css">
    <link rel="modulepreload" href="/assets/Home.5559dd78.js">
    <link rel="modulepreload" href="/assets/AlgoliaSearchBox.48ffd8d8.js">
    <link rel="modulepreload" href="/assets/app.c49d6374.js">
    <link rel="modulepreload" href="/assets/guide_migrate-to-v2_index.md.80cb4170.lean.js">
    <link rel="modulepreload" href="/assets/app.c49d6374.js">
    <link rel="apple-touch-icon" sizes="180x180" href="/static/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/static/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/static/favicon-16x16.png">
    <link rel="manifest" href="/static/site.webmanifest">
    <link rel="mask-icon" href="/static/safari-pinned-tab.svg" color="#c34c5c">
    <link rel="shortcut icon" href="/static/favicon.ico">
    <meta name="apple-mobile-web-app-title" content="AEM Vite">
    <meta name="application-name" content="AEM Vite">
    <meta name="msapplication-TileColor" content="#c34c5c">
    <meta name="theme-color" content="#ffffff">
    <meta property="og:title" content="AEM Vite">
    <meta property="og:description" content="AEM Vite is a plugin for AEM that enables transparent support for the Vite DevServer.">
    <meta property="og:image" content="/static/social/og-primary.jpg">
    <meta name="twitter:title" content="AEM Vite">
    <meta property="twitter:description" content="AEM Vite is a plugin for AEM that enables transparent support for the Vite DevServer.">
    <meta property="twitter:site" content="@cshawaus">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme"><header class="nav-bar" data-v-7161a24b><div class="sidebar-button" data-v-7161a24b><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/" aria-label="AEM Vite, back to home" data-v-7161a24b data-v-4a583abe><img class="logo" src="/static/logo.png" alt="Logo" data-v-4a583abe> AEM Vite</a><div class="flex-grow" data-v-7161a24b></div><div class="nav" data-v-7161a24b><nav class="nav-links" data-v-7161a24b data-v-15acbf05><!--[--><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-641633f9><a class="item" href="/guide/backend/installation/" data-v-641633f9>Installation <!----></a></div></div><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-641633f9><a class="item" href="/guide/front-end/" data-v-641633f9>Front End <!----></a></div></div><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-641633f9><a class="item" href="/guide/legacy-bundles/" data-v-641633f9>Legacy Bundles <!----></a></div></div><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-641633f9><a class="item" href="/guide/faqs/" data-v-641633f9>FAQs <!----></a></div></div><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-641633f9><a class="item isExternal" href="https://github.com/aem-vite/aem-vite/blob/main/CHANGELOG.md" target="_blank" rel="noopener noreferrer" data-v-641633f9>Changelog <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-641633f9><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><!--]--><!----><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-641633f9><a class="item isExternal" href="https://github.com/aem-vite/aem-vite" target="_blank" rel="noopener noreferrer" data-v-641633f9>GitHub <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-641633f9><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div></nav></div><!--[--><!--[--><div class="algolia-search-box" id="docsearch"></div><!--]--><!--]--></header><aside class="sidebar" data-v-6b49cdcd><nav class="nav-links nav" data-v-6b49cdcd data-v-15acbf05><!--[--><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-641633f9><a class="item" href="/guide/backend/installation/" data-v-641633f9>Installation <!----></a></div></div><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-641633f9><a class="item" href="/guide/front-end/" data-v-641633f9>Front End <!----></a></div></div><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-641633f9><a class="item" href="/guide/legacy-bundles/" data-v-641633f9>Legacy Bundles <!----></a></div></div><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-641633f9><a class="item" href="/guide/faqs/" data-v-641633f9>FAQs <!----></a></div></div><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-641633f9><a class="item isExternal" href="https://github.com/aem-vite/aem-vite/blob/main/CHANGELOG.md" target="_blank" rel="noopener noreferrer" data-v-641633f9>Changelog <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-641633f9><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><!--]--><!----><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-641633f9><a class="item isExternal" href="https://github.com/aem-vite/aem-vite" target="_blank" rel="noopener noreferrer" data-v-641633f9>GitHub <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-641633f9><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div></nav><!--[--><!--]--><ul class="sidebar-links" data-v-6b49cdcd><!--[--><li class="sidebar-link"><p class="sidebar-link-item">Guide</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/guide/">Overview</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">Backend (AEM)</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/guide/backend/installation/">Installation</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/guide/backend/configuration/">Configuration</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/guide/backend/permissions/">Permissions</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">Front End</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/guide/front-end/">Preparing your project</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/guide/front-end/structure/">Structure</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/guide/front-end/vite/">Vite Configuration</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/guide/front-end/module-imports/">Module imports</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/guide/front-end/dynamic-imports/">Dynamic imports</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">Legacy Bundles</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/guide/legacy-bundles/">What are they?</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/guide/legacy-bundles/clientlibs/">ClientLibs support</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="/guide/faqs/">FAQs</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item active" href="/guide/migrate-to-v2/">Migrate to v2.x</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#circular-imports">Circular imports</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#what-does-import-rewriter-do">What does import rewriter do?</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#caching">Caching</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#aem-as-a-cloud-service">AEM as a Cloud Service</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#acs-commons-versioned-clientlibs">ACS Commons Versioned ClientLibs</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#additional-notes">Additional notes</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#js-txt-support">js.txt support</a><!----></li></ul></li></ul></li><!--]--></ul><!--[--><!--]--></aside><!-- TODO: make this button accessible --><div class="sidebar-mask"></div><main class="page" data-v-7eddb2c4><div class="container" data-v-7eddb2c4><!--[--><!--]--><div style="position:relative;" class="content" data-v-7eddb2c4><div><h1 id="frontmatter-title"><a class="header-anchor" href="#frontmatter-title" aria-hidden="true">#</a> Migrate to v2.x</h1><p>The v2.x releases and above now brings full support for circular imports along with cache support in ClientLib paths. To get the most out of AEM Vite, ensure you update your POM version to <code>2.0.3</code> or greater and <code>@aem-vite/import-rewriter</code> to <code>2.0.0</code> or greater.</p><h2 id="circular-imports"><a class="header-anchor" href="#circular-imports" aria-hidden="true">#</a> Circular imports</h2><p>ES modules bring the ability to import certain exports from an already loaded module without the browser needing to parse it again. This brings vast improvements to JavaScript runtime performance, but AEM doesn&#39;t natively support this behaviour.</p><p>AEM uses ClientLibs which are a custom combinator that reads inputs, and creates a single output. A core problem of such a solution is it prevents us from being able to experience ES modules as intended. But with AEM Vite&#39;s import rewriter plugin for Vite – this is now automatically handled for you.</p><h3 id="what-does-import-rewriter-do"><a class="header-anchor" href="#what-does-import-rewriter-do" aria-hidden="true">#</a> What does import rewriter do?</h3><p>The AEM Vite import rewriter plugin will scan through your rollup entry configuration and identify the main JavaScript entry (when possible). Upon finding a valid entry, import rewriter will then look through any generated chunks and replace the <code>import</code> path with the correct AEM ClientLib path.</p><p>This is a very important step in bringing additional modern technologies into AEM without the need of doing it per project.</p><h2 id="caching"><a class="header-anchor" href="#caching" aria-hidden="true">#</a> Caching</h2><p>AEM as a Cloud Service (AEMaaCS) brings native support for long term cache support which was not previously supported by AEM Vite. Through some careful plotting, AEM Vite is able to generate a matching MD5 checksum when enabled in the import rewriter.</p><h3 id="aem-as-a-cloud-service"><a class="header-anchor" href="#aem-as-a-cloud-service" aria-hidden="true">#</a> AEM as a Cloud Service</h3><p>AEM Vite is setup by default to use the cache key format for AEMaaCS. All you need to do is configure the <code>caching</code> property. Please see the <a href="./../front-end/dynamic-imports/#caching">caching configuration</a> for more information.</p><h3 id="acs-commons-versioned-clientlibs"><a class="header-anchor" href="#acs-commons-versioned-clientlibs" aria-hidden="true">#</a> ACS Commons Versioned ClientLibs</h3><p>In addition to supporting AEMaaCS, AEM Vite also supports the ACS Commons Versioned ClientLibs plugin. Configuring support in your project is as simple as adding the <code>keyFormat</code> property with an empty string value to your <a href="./../front-end/dynamic-imports/#caching">caching configuration</a>.</p><h2 id="additional-notes"><a class="header-anchor" href="#additional-notes" aria-hidden="true">#</a> Additional notes</h2><p>There are some additional things to note so please read the below carefully.</p><h3 id="js-txt-support"><a class="header-anchor" href="#js-txt-support" aria-hidden="true">#</a> js.txt support</h3><p>AEM Vite only supports a single entry in the <code>js.txt</code> file. If you need multiple entry files, you will need to create a new ClientLib as this is a limitation of AEM ClientLib&#39;s - rather than AEM Vite.</p></div></div><footer class="page-footer" data-v-7eddb2c4 data-v-fb8d84c6><div class="edit" data-v-fb8d84c6><div class="edit-link" data-v-fb8d84c6 data-v-1ed99556><!----></div></div><div class="updated" data-v-fb8d84c6><!----></div></footer><div class="next-and-prev-link" data-v-7eddb2c4 data-v-38ede35f><div class="container" data-v-38ede35f><div class="prev" data-v-38ede35f><a class="link" href="/guide/faqs/" data-v-38ede35f><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-prev" data-v-38ede35f><path d="M19,11H7.4l5.3-5.3c0.4-0.4,0.4-1,0-1.4s-1-0.4-1.4,0l-7,7c-0.1,0.1-0.2,0.2-0.2,0.3c-0.1,0.2-0.1,0.5,0,0.8c0.1,0.1,0.1,0.2,0.2,0.3l7,7c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3c0.4-0.4,0.4-1,0-1.4L7.4,13H19c0.6,0,1-0.4,1-1S19.6,11,19,11z"></path></svg><span class="text" data-v-38ede35f>FAQs</span></a></div><div class="next" data-v-38ede35f><!----></div></div></div><!--[--><!--]--></div></main></div><!----><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"index.md\":\"1bcb9a76\",\"guide_index.md\":\"d522291f\",\"guide_faqs_index.md\":\"cb5074a5\",\"guide_front-end_index.md\":\"03b2f297\",\"guide_legacy-bundles_index.md\":\"9aab5ce4\",\"guide_migrate-to-v2_index.md\":\"80cb4170\",\"guide_backend_configuration_index.md\":\"c3f539d6\",\"guide_backend_installation_index.md\":\"2adec544\",\"guide_backend_permissions_index.md\":\"f429869e\",\"guide_extending_clientlibs_index.md\":\"81db5dbc\",\"guide_extending_why_index.md\":\"2aa7d35e\",\"guide_front-end_dynamic-imports_index.md\":\"6a421a7b\",\"guide_front-end_module-imports_index.md\":\"d174c66e\",\"guide_front-end_structure_index.md\":\"f15d124d\",\"guide_front-end_vite_index.md\":\"3ec386e4\",\"guide_legacy-bundles_clientlibs_index.md\":\"47cd272e\"}")</script>
    <script type="module" async src="/assets/app.c49d6374.js"></script>
  </body>
</html>